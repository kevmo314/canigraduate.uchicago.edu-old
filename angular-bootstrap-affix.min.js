/**
 * angular-bootstrap-affix
 * @version v0.3.0 - 2013-09-23
 * @link https://github.com/mgcrea/bootstrap-affix
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(){"use strict";angular.module("mgcrea.bootstrap.affix",["mgcrea.jqlite.dimensions"]).provider("$affix",function(){var a=angular.element,b=this.defaults={offsetTop:"auto"};this.$get=["$window","dimensions",function(c,d){function e(e,h){function i(a,b,d){var e=c.pageYOffset,f=c.document.body.scrollHeight;return s>=e?"top":null!==a&&e+a<=b.top?"middle":null!==t&&b.top+d+m>=f-t?"bottom":"middle"}var j={},k=angular.extend({},b,h),l="affix affix-top affix-bottom",m=0,n=0,o=null,p=null,q=e.parent();if(k.offsetParent)if(k.offsetParent.match(/^\d+$/))for(var r=0;r<1*k.offsetParent-1;r++)q=q.parent();else q=a(k.offsetParent);var s=0;k.offsetTop&&("auto"===k.offsetTop||k.offsetTop.match(/^[-+]\d+$/)?(m-=1*k.offsetTop,s=k.offsetParent?d.offset(q[0]).top+1*k.offsetTop:d.offset(e[0]).top-d.css(e[0],"marginTop",!0)+1*k.offsetTop):s=1*k.offsetTop);var t=0;return k.offsetBottom&&(t=k.offsetParent&&k.offsetBottom.match(/^[-+]\d+$/)?c.document.body.scrollHeight-(d.offset(q[0]).top+d.height(q[0]))+1*k.offsetBottom+1:1*k.offsetBottom),j.init=function(){n=d.offset(e[0]).top+m,f.on("scroll",this.checkPosition),f.on("click",this.checkPositionWithEventLoop),this.checkPosition(),this.checkPositionWithEventLoop()},j.destroy=function(){f.off("scroll",this.checkPosition),f.off("click",this.checkPositionWithEventLoop)},j.checkPositionWithEventLoop=function(){setTimeout(this.checkPosition,1)},j.checkPosition=function(){var a=c.pageYOffset,b=d.offset(e[0]),f=d.height(e[0]),h=i(p,b,f);o!==h&&(o=h,e.removeClass(l).addClass("affix"+("middle"!==h?"-"+h:"")),"top"===h?(p=null,e.css("position",k.offsetParent?"":"relative"),e.css("top","")):"bottom"===h?(p=k.offsetUnpin?-(1*k.offsetUnpin):b.top-a,e.css("position",k.offsetParent?"":"relative"),e.css("top",k.offsetParent?"":g[0].offsetHeight-t-f-n+"px")):(p=null,e.css("position","fixed"),e.css("top",m+"px")))},j.init(),j}var f=a(c),g=a(c.document.body);return e}]}).directive("wgAffix",["$affix","dimensions",function(a){var b=angular.forEach,c=angular.isDefined;return angular.element,{restrict:"EAC",link:function(d,e,f){var g={scope:d,offsetTop:"auto"};b(["offsetTop","offsetBottom","offsetParent","offsetUnpin"],function(a){c(f[a])&&(g[a]=f[a])});var h=a(e,g);d.$on("$destroy",function(){g=null,h=null})}}}])}(window,document);